apiVersion: skiperator.kartverket.no/v1alpha1
kind: Application
metadata:
  name: application-auth
spec:
  image: image
  port: 8080
  ingresses:
    - example.com
  authorizationSettings:
    allowList:
      - "/publicEndpoint"
  idporten:
    enabled: true
    integrationType: "api_klient"
    scopes:
      - "openid"
    authentication:
      enabled: true
      ignorePaths:
        - "/loginIdPorten"
  maskinporten:
    enabled: false
    authentication:
      enabled: true
      secretName: "maskinporten-secret"
      paths:
        - "/secureMaskinPorten"
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: "idporten-application-auth-f816cf66"
data:
  IDPORTEN_CLIENT_ID: dGVzdC1jbGllbnQtaWQtaWRwb3J0ZW4= #test-client-id-idporten
  IDPORTEN_ISSUER: aHR0cHM6Ly9pZHBvcnRlbi5ubw== #https://idporten.no
  IDPORTEN_JWKS_URI: aHR0cHM6Ly9pZHBvcnRlbi5uby9qd2tzLmpzb24= #https://idporten.no/jwks.json
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: "maskinporten-secret"
data:
  MASKINPORTEN_CLIENT_ID: dGVzdC1jbGllbnQtaWQtbWFza2lucG9ydGVu #test-client-id-maskinporten
  MASKINPORTEN_ISSUER: aHR0cHM6Ly9tYXNraW5wb3J0ZW4ubm8v #https://maskinporten.no/
  MASKINPORTEN_JWKS_URI: aHR0cHM6Ly9tYXNraW5wb3J0ZW4ubm8vandr #https://maskinporten.no/jwk