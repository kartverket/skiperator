apiVersion: skiperator.kartverket.no/v1alpha1
kind: Application
metadata:
  name: idporten-test-client
spec:
  image: image
  port: 8080
  ingresses:
    - example.com
  idporten:
    enabled: true
    integrationType: "api_klient"
    scopes:
      - "openid"
---
apiVersion: skiperator.kartverket.no/v1alpha1
kind: Application
metadata:
  name: idporten-test-client-with-auth
spec:
  image: image
  port: 8080
  ingresses:
    - example.com
  idporten:
    enabled: true
    integrationType: "api_klient"
    scopes:
      - "openid"
    authentication:
      enabled: true
      secretName: "idporten-idporten-test-client-with-auth-c47dbf96"
      outputClaimToHeaders:
        - claim: "aud"
          header: "Audience"
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: "idporten-idporten-test-client-with-auth-c47dbf96"
data:
  IDPORTEN_CLIENT_ID: dGVzdC1jbGllbnQtaWQtaWRwb3J0ZW4= #test-client-id-idporten
  IDPORTEN_ISSUER: aHR0cHM6Ly9pZHBvcnRlbi5ubw== #https://idporten.no
  IDPORTEN_JWKS_URI: aHR0cHM6Ly9pZHBvcnRlbi5uby9qd2tzLmpzb24= #https://idporten.no/jwks.json