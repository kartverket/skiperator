apiVersion: skiperator.kartverket.no/v1alpha1
kind: Application
metadata:
  name: application
spec:
  image: image
  port: 8080
  ingresses:
    - example.com
  idporten:
    enabled: true
    integrationType: "api_klient"
    scopes:
      - "openid"
---
apiVersion: skiperator.kartverket.no/v1alpha1
kind: Application
metadata:
  name: application-auth
spec:
  image: image
  port: 8080
  ingresses:
    - example.com
  idporten:
    enabled: true
    integrationType: "api_klient"
    scopes:
      - "openid"
    authentication:
      enabled: true
      secretName: "idporten-application-auth-f816cf66"
      outputClaimToHeaders:
        - claim: "aud"
          header: "Audience"
---
apiVersion: skiperator.kartverket.no/v1alpha1
kind: Application
metadata:
  name: application-auth-settings
spec:
  image: image
  port: 8080
  ingresses:
    - example.com
  authorizationSettings:
    allowList:
      - "/actuator/health"
      - "/actuator/info"
  idporten:
    enabled: true
    integrationType: "api_klient"
    scopes:
      - "openid"
    authentication:
      enabled: true
      secretName: "idporten-application-auth-settings-64e091c3"
      outputClaimToHeaders:
        - claim: "aud"
          header: "Audience"
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: "idporten-application-auth-f816cf66"
data:
  IDPORTEN_CLIENT_ID: dGVzdC1jbGllbnQtaWQtaWRwb3J0ZW4= #test-client-id-idporten
  IDPORTEN_ISSUER: aHR0cHM6Ly9pZHBvcnRlbi5ubw== #https://idporten.no
  IDPORTEN_JWKS_URI: aHR0cHM6Ly9pZHBvcnRlbi5uby9qd2tzLmpzb24= #https://idporten.no/jwks.json
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: "idporten-application-auth-settings-64e091c3"
data:
  IDPORTEN_CLIENT_ID: dGVzdC1jbGllbnQtaWQtaWRwb3J0ZW4= #test-client-id-idporten
  IDPORTEN_ISSUER: aHR0cHM6Ly9pZHBvcnRlbi5ubw== #https://idporten.no
  IDPORTEN_JWKS_URI: aHR0cHM6Ly9pZHBvcnRlbi5uby9qd2tzLmpzb24= #https://idporten.no/jwks.json